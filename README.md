# Go Simple WhatsApp Gateway

A simple, self-hosted WhatsApp Gateway that provides both a RESTful API and web UI to manage multiple WhatsApp accounts.

## Warning

**IMPORTANT DISCLAIMER**: This application is not officially associated with Meta or WhatsApp and is created for educational purposes only. Since this is open source software, please use it responsibly:

- Do not use for spam or any malicious activities
- Do not use for any illegal purposes
- Respect WhatsApp's terms of service

If your phone number gets banned by WhatsApp or any other negative consequences occur, the developers of this software bear no responsibility. Use at your own risk.

## Features

- Multiple WhatsApp client support
- RESTful API for integration with other systems
- Web UI for easy management
- QR code authentication
- Message sending
- Persistent sessions

## Installation

### Prerequisites

- Go 1.20 or higher
- SQLite3

### Steps

1. Clone the repository:
   ```
   git clone https://github.com/yourusername/go-simple-whatsapp-gateway2.git
   cd go-simple-whatsapp-gateway2
   ```

2. Configure the application:
   ```
   cp .env.example .env
   ```
   Edit the `.env` file to set your own API key and other settings.

3. Build and run the application:
   ```
   go build
   ./go-simple-whatsapp-gateway2
   ```

   Or use the provided batch files:
   ```
   run.bat             # Regular mode
   run_debug.bat       # Debug mode with verbose logging
   run_release.bat     # Release mode (optimized)
   ```

## Deployment

### Deploy on Coolify

You can easily deploy this application on [Coolify](https://coolify.io/), a self-hostable Heroku/Netlify alternative:

1. Set up a Coolify instance following their documentation
2. Create a new service and select "Git Repository"
3. Connect your fork of this repository
4. Configure the build settings:
   - Build Command: `go build -o app`
   - Start Command: `./app`
5. Add the environment variables from `.env` file
6. Deploy the application

Coolify will automatically build and run your WhatsApp Gateway, making it accessible through the provided URL.

## Usage

### Web UI

1. Open your browser and navigate to: `http://localhost:8080`
2. You'll be prompted to enter your API key (default: `changeme` from .env file)
3. Create a new WhatsApp client
4. Scan the QR code with your phone's WhatsApp app
5. Start sending messages

### API Endpoints

Authentication is required for all API endpoints. You can pass your API key in one of two ways:
- Via the `X-API-Key` header
- Via the `api_key` query parameter

#### Main API Endpoints:

- List Clients: `GET /api/clients`
- Create Client: `POST /api/clients`
- Get Client Status: `GET /api/clients/{id}`
- Delete Client: `DELETE /api/clients/{id}`
- Generate QR Code: `GET /api/clients/{id}/qr`
- Send Message: `POST /api/clients/{id}/send`
- Logout Client: `POST /api/clients/{id}/logout`

### Sending Messages

When sending messages, the recipient phone number must be in one of these formats:
- `628123456789` (no plus sign)
- `+628123456789` (with plus sign)
- `628123456789@s.whatsapp.net` (full JID format)

Always include the country code (e.g., 62 for Indonesia, 1 for US/Canada).

Example API request:
```json
POST /api/clients/{id}/send
{
  "recipient": "628123456789",
  "message": "Hello, this is a test message!"
}
```

## Troubleshooting

### Common Issues

1. **Blank white page**: If you see a blank white page when accessing the web UI, check:
   - Browser console for JavaScript errors
   - Application logs for backend errors
   - Try using the `/test` endpoint to verify template rendering

2. **QR code generation errors**: These can occur when:
   - The WhatsApp Web client is outdated (update the whatsmeow library)
   - The client is already logged in (logout first)
   - Connection issues (check network connectivity)

3. **Message sending errors**: Usually caused by:
   - Incorrect phone number format (make sure to use correct format with country code)
   - Not connected to WhatsApp (reconnect using QR code)
   - Invalid recipient (check if the number exists on WhatsApp)

## License

This project is licensed under the MIT License - see the LICENSE file for details.

## Acknowledgments

- [whatsmeow](https://github.com/tulir/whatsmeow) - The Go WhatsApp library
- [Gin Web Framework](https://github.com/gin-gonic/gin) - The web framework used
- The Code Generated by Claude 3.7 Sonnet
